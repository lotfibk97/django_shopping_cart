{% load static %} {% load static cart_tags %}
<!DOCTYPE html>
<html>
  <head>
    <title>Shopping Cart</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="{% static 'cart/cart.js' %}"></script>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Shopping Cart</h1>
      <form action="{% url 'cart:shopping_cart' %}" method="post">
        {% csrf_token %}
        <table class="table table-bordered mt-3">
          <thead>
            <tr>
              <th>Product name</th>
              <th>Quantity (kg)</th>
              <th>Price (per kg in AED)</th>
              <th>Line Price</th>
            </tr>
          </thead>
          <tbody>
            {% for order in orders %}
            <tr class="order_item">
              <td>{{ order.product.name }}</td>
              <td class="quantity">
                <input
                  name="{{order.id}}"
                  type="number"
                  class="form-control"
                  id="quantity"
                  min="0"
                  value="{{order.quantity}}"
                />
              </td>
              <td class="price">{{ order.product.price }}</td>
              <td class="line_price">
                {{ order.product.price|multiply:order.quantity }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <th colspan="3">Total Price:</th>
              <td id="total_price">0</td>
            </tr>
          </tfoot>
        </table>
        <div class="container text-center">
          <button type="submit" class="btn btn-primary">Buy</button>
        </div>
      </form>
    </div>
  </body>
</html>
